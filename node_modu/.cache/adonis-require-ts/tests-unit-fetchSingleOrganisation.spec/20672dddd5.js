"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const runner_1 = require("@japa/runner");
const sinon_1 = __importDefault(require("sinon"));
const FetchSingleOrganisationController_1 = __importDefault(global[Symbol.for('ioc.use')]("App/Controllers/Http/FetchSingleOrganisationController"));
const UserAction_1 = global[Symbol.for('ioc.use')]("App/Actions/UserAction");
runner_1.test.group('FetchSingleOrganisationController', (group) => {
    let sandbox;
    group.setup(async () => {
        sandbox = sinon_1.default.createSandbox();
    });
    group.teardown(async () => {
        sandbox.restore();
    });
    group.each.teardown = () => {
        sandbox.restore();
    };
    (0, runner_1.test)('should return 200 and organisation data if organisation is found', async ({ assert }) => {
        const controller = new FetchSingleOrganisationController_1.default();
        const fakeUser = { userId: '123e4567-e89b-12d3-a456-426614174000' };
        const orgId = '123e4567-e89b-12d3-a456-426614174001';
        const fakeOrganisations = [{ orgId: '123e4567-e89b-12d3-a456-426614174001', name: 'Test Org', description: "a random organisation" }];
        sandbox.stub(UserAction_1.UserActions, 'fetchUserOrganisations').resolves(fakeOrganisations);
        const request = {
            param: sandbox.stub().returns(orgId)
        };
        const response = {
            status: sandbox.stub().returnsThis(),
            send: sandbox.stub()
        };
        const auth = {
            user: fakeUser
        };
        const ctx = { request, response, auth };
        await controller.handle(ctx);
        assert.isTrue(response.status.calledWith(200));
        assert.isTrue(response.send.calledWith({
            status: "success",
            message: "Organisation fetched successfully",
            data: fakeOrganisations[0]
        }));
        sandbox.restore();
    });
    (0, runner_1.test)('should return 404 if organisation is not found', async ({ assert }) => {
        const controller = new FetchSingleOrganisationController_1.default();
        const fakeUser = { userId: '123e4567-e89b-12d3-a456-426614174000' };
        const orgId = '123e4567-e89b-12d3-a456-426614174001';
        const fakeOrganisations = [{ orgId: '123e4567-e89b-12d3-a456-426614174002', name: 'Other Org', description: "nice description" }];
        sandbox.stub(UserAction_1.UserActions, 'fetchUserOrganisations').resolves(fakeOrganisations);
        const request = {
            param: sandbox.stub().returns(orgId)
        };
        const response = {
            status: sandbox.stub().returnsThis(),
            send: sandbox.stub()
        };
        const auth = {
            user: fakeUser
        };
        const ctx = { request, response, auth };
        await controller.handle(ctx);
        assert.isTrue(response.status.calledWith(404));
        assert.isTrue(response.send.calledWith({
            status: "Bad Request",
            message: "Organisation record not found",
            data: undefined
        }));
        sandbox.restore();
    });
    (0, runner_1.test)('should return 500 if an error occurs', async ({ assert }) => {
        const controller = new FetchSingleOrganisationController_1.default();
        const fakeUser = { userId: '123e4567-e89b-12d3-a456-426614174000' };
        const orgId = '123e4567-e89b-12d3-a456-426614174001';
        sandbox.stub(UserAction_1.UserActions, 'fetchUserOrganisations').throws(new Error('Simulated error'));
        const request = {
            param: sandbox.stub().returns(orgId)
        };
        const response = {
            status: sandbox.stub().returnsThis(),
            send: sandbox.stub()
        };
        const auth = {
            user: fakeUser
        };
        const ctx = { request, response, auth };
        await controller.handle(ctx);
        assert.isTrue(response.status.calledWith(500));
        assert.isTrue(response.send.calledWith({
            status: "Error",
            message: "Error Occured Fetching Organisation",
            statusCode: 500
        }));
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmV0Y2hTaW5nbGVPcmdhbmlzYXRpb24uc3BlYy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImZldGNoU2luZ2xlT3JnYW5pc2F0aW9uLnNwZWMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSx5Q0FBaUM7QUFDakMsa0RBQXlCO0FBQ3pCLHFKQUFzRztBQUN0Ryw2RUFBb0Q7QUFJcEQsYUFBSSxDQUFDLEtBQUssQ0FBQyxtQ0FBbUMsRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFO0lBQ3RELElBQUksT0FBMkIsQ0FBQTtJQUVqQyxLQUFLLENBQUMsS0FBSyxDQUFDLEtBQUssSUFBSSxFQUFFO1FBRXJCLE9BQU8sR0FBRyxlQUFLLENBQUMsYUFBYSxFQUFFLENBQUE7SUFDakMsQ0FBQyxDQUFDLENBQUE7SUFFRixLQUFLLENBQUMsUUFBUSxDQUFDLEtBQUssSUFBSSxFQUFFO1FBQ3hCLE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQTtJQUNuQixDQUFDLENBQUMsQ0FBQTtJQUVGLEtBQUssQ0FBQyxJQUFJLENBQUMsUUFBUSxHQUFHLEdBQUcsRUFBRTtRQUN6QixPQUFPLENBQUMsT0FBTyxFQUFFLENBQUE7SUFDbkIsQ0FBQyxDQUFBO0lBR0QsSUFBQSxhQUFJLEVBQUMsa0VBQWtFLEVBQUUsS0FBSyxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRTtRQUM1RixNQUFNLFVBQVUsR0FBRyxJQUFJLDJDQUFpQyxFQUFFLENBQUE7UUFFMUQsTUFBTSxRQUFRLEdBQUcsRUFBRSxNQUFNLEVBQUUsc0NBQXNDLEVBQVUsQ0FBQTtRQUMzRSxNQUFNLEtBQUssR0FBRyxzQ0FBc0MsQ0FBQTtRQUNwRCxNQUFNLGlCQUFpQixHQUFHLENBQUMsRUFBRSxLQUFLLEVBQUUsc0NBQXNDLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxXQUFXLEVBQUMsdUJBQXVCLEVBQUUsQ0FBQyxDQUFBO1FBRXBJLE9BQU8sQ0FBQyxJQUFJLENBQUMsd0JBQVcsRUFB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aW5vbiBmcm9tICdzaW5vbidcbmltcG9ydCBGZXRjaFNpbmdsZU9yZ2FuaXNhdGlvbkNvbnRyb2xsZXIgZnJvbSAnQXBwL0NvbnRyb2xsZXJzL0h0dHAvRmV0Y2hTaW5nbGVPcmdhbmlzYXRpb25Db250cm9sbGVyJ1xuaW1wb3J0IHsgVXNlckFjdGlvbnMgfSBmcm9tICdBcHAvQWN0aW9ucy9Vc2VyQWN0aW9uJ1xuaW1wb3J0IHsgSHR0cENvbnRleHRDb250cmFjdCB9IGZyb20gJ0Bpb2M6QWRvbmlzL0NvcmUvSHR0cENvbnRleHQnXG5pbXBvcnQgIFVzZXIgIGZyb20gJ0FwcC9Nb2RlbHMvVXNlcidcblxudGVzdC5ncm91cCgnRmV0Y2hTaW5nbGVPcmdhbmlzYXRpb25Db250cm9sbGVyJywgKGdyb3VwKSA9PiB7XG4gICAgbGV0IHNhbmRib3g6IHNpbm9uLlNpbm9uU2FuZGJveFxuXG4gIGdyb3VwLnNldHVwKGFzeW5jICgpID0+IHtcbiAgICBcbiAgICBzYW5kYm94ID0gc2lub24uY3JlYXRlU2FuZGJveCgpXG4gIH0pXG5cbiAgZ3JvdXAudGVhcmRvd24oYXN5bmMgKCkgPT4ge1xuICAgIHNhbmRib3gucmVzdG9yZSgpXG4gIH0pIFxuXG4gIGdyb3VwLmVhY2gudGVhcmRvd24gPSAoKSA9PiB7XG4gICAgc2FuZGJveC5yZXN0b3JlKClcbiAgfVxuXG5cbiAgdGVzdCgnc2hvdWxkIHJldHVybiAyMDAgYW5kIG9yZ2FuaXNhdGlvbiBkYXRhIGlmIG9yZ2FuaXNhdGlvbiBpcyBmb3VuZCcsIGFzeW5jICh7IGFzc2VydCB9KSA9PiB7XG4gICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBGZXRjaFNpbmdsZU9yZ2FuaXNhdGlvbkNvbnRyb2xsZXIoKVxuXG4gICAgY29uc3QgZmFrZVVzZXIgPSB7IHVzZXJJZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcgfSBhcyBVc2VyXG4gICAgY29uc3Qgb3JnSWQgPSAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAxJ1xuICAgIGNvbnN0IGZha2VPcmdhbmlzYXRpb25zID0gW3sgb3JnSWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDEnLCBuYW1lOiAnVGVzdCBPcmcnLCBkZXNjcmlwdGlvbjpcImEgcmFuZG9tIG9yZ2FuaXNhdGlvblwiIH1dXG5cbiAgICBzYW5kYm94LnN0dWIoVXNlckFjdGlvbnMsICdmZXRjaFVzZXJPcmdhbmlzYXRpb25zJykucmVzb2x2ZXMoZmFrZU9yZ2FuaXNhdGlvbnMpXG5cbiAgICBjb25zdCByZXF1ZXN0ID0ge1xuICAgICAgcGFyYW06IHNhbmRib3guc3R1YigpLnJldHVybnMob3JnSWQpXG4gICAgfVxuXG4gICAgY29uc3QgcmVzcG9uc2UgPSB7XG4gICAgICBzdGF0dXM6IHNhbmRib3guc3R1YigpLnJldHVybnNUaGlzKCksXG4gICAgICBzZW5kOiBzYW5kYm94LnN0dWIoKVxuICAgIH1cblxuICAgIGNvbnN0IGF1dGggPSB7XG4gICAgICB1c2VyOiBmYWtlVXNlclxuICAgIH1cblxuICAgIGNvbnN0IGN0eCA9IHsgcmVxdWVzdCwgcmVzcG9uc2UsIGF1dGggfSBhcyB1bmtub3duIGFzIEh0dHBDb250ZXh0Q29udHJhY3RcblxuICAgIGF3YWl0IGNvbnRyb2xsZXIuaGFuZGxlKGN0eClcblxuICAgIGFzc2VydC5pc1RydWUocmVzcG9uc2Uuc3RhdHVzLmNhbGxlZFdpdGgoMjAwKSlcbiAgICBhc3NlcnQuaXNUcnVlKHJlc3BvbnNlLnNlbmQuY2FsbGVkV2l0aCh7XG4gICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgICAgbWVzc2FnZTogXCJPcmdhbmlzYXRpb24gZmV0Y2hlZCBzdWNjZXNzZnVsbHlcIixcbiAgICAgIGRhdGE6IGZha2VPcmdhbmlzYXRpb25zWzBdXG4gICAgfSkpXG4gICAgc2FuZGJveC5yZXN0b3JlKClcbiAgfSlcblxuICB0ZXN0KCdzaG91bGQgcmV0dXJuIDQwNCBpZiBvcmdhbmlzYXRpb24gaXMgbm90IGZvdW5kJywgYXN5bmMgKHsgYXNzZXJ0IH0pID0+IHtcbiAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEZldGNoU2luZ2xlT3JnYW5pc2F0aW9uQ29udHJvbGxlcigpXG5cbiAgICBjb25zdCBmYWtlVXNlciA9IHsgdXNlcklkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyB9IGFzIFVzZXJcbiAgICBjb25zdCBvcmdJZCA9ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDEnXG4gICAgY29uc3QgZmFrZU9yZ2FuaXNhdGlvbnMgPSBbeyBvcmdJZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMicsIG5hbWU6ICdPdGhlciBPcmcnLCBkZXNjcmlwdGlvbjogXCJuaWNlIGRlc2NyaXB0aW9uXCIgfV1cblxuICAgIHNhbmRib3guc3R1YihVc2VyQWN0aW9ucywgJ2ZldGNoVXNlck9yZ2FuaXNhdGlvbnMnKS5yZXNvbHZlcyhmYWtlT3JnYW5pc2F0aW9ucylcblxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XG4gICAgICBwYXJhbTogc2FuZGJveC5zdHViKCkucmV0dXJucyhvcmdJZClcbiAgICB9XG5cbiAgICBjb25zdCByZXNwb25zZSA9IHtcbiAgICAgIHN0YXR1czogc2FuZGJveC5zdHViKCkucmV0dXJuc1RoaXMoKSxcbiAgICAgIHNlbmQ6IHNhbmRib3guc3R1YigpXG4gICAgfVxuXG4gICAgY29uc3QgYXV0aCA9IHtcbiAgICAgIHVzZXI6IGZha2VVc2VyXG4gICAgfVxuXG4gICAgY29uc3QgY3R4ID0geyByZXF1ZXN0LCByZXNwb25zZSwgYXV0aCB9IGFzIHVua25vd24gYXMgSHR0cENvbnRleHRDb250cmFjdFxuXG4gICAgYXdhaXQgY29udHJvbGxlci5oYW5kbGUoY3R4KVxuXG4gICAgYXNzZXJ0LmlzVHJ1ZShyZXNwb25zZS5zdGF0dXMuY2FsbGVkV2l0aCg0MDQpKVxuICAgIGFzc2VydC5pc1RydWUocmVzcG9uc2Uuc2VuZC5jYWxsZWRXaXRoKHtcbiAgICAgIHN0YXR1czogXCJCYWQgUmVxdWVzdFwiLFxuICAgICAgbWVzc2FnZTogXCJPcmdhbmlzYXRpb24gcmVjb3JkIG5vdCBmb3VuZFwiLFxuICAgICAgZGF0YTogdW5kZWZpbmVkXG4gICAgfSkpXG4gICAgc2FuZGJveC5yZXN0b3JlKClcbiAgfSlcblxuICB0ZXN0KCdzaG91bGQgcmV0dXJuIDUwMCBpZiBhbiBlcnJvciBvY2N1cnMnLCBhc3luYyAoeyBhc3NlcnQgfSkgPT4ge1xuICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgRmV0Y2hTaW5nbGVPcmdhbmlzYXRpb25Db250cm9sbGVyKClcblxuICAgIGNvbnN0IGZha2VVc2VyID0geyB1c2VySWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnIH0gYXMgVXNlclxuICAgIGNvbnN0IG9yZ0lkID0gJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMSdcblxuICAgIHNhbmRib3guc3R1YihVc2VyQWN0aW9ucywgJ2ZldGNoVXNlck9yZ2FuaXNhdGlvbnMnKS50aHJvd3MobmV3IEVycm9yKCdTaW11bGF0ZWQgZXJyb3InKSlcblxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XG4gICAgICBwYXJhbTogc2FuZGJveC5zdHViKCkucmV0dXJucyhvcmdJZClcbiAgICB9XG5cbiAgICBjb25zdCByZXNwb25zZSA9IHtcbiAgICAgIHN0YXR1czogc2FuZGJveC5zdHViKCkucmV0dXJuc1RoaXMoKSxcbiAgICAgIHNlbmQ6IHNhbmRib3guc3R1YigpXG4gICAgfVxuXG4gICAgY29uc3QgYXV0aCA9IHtcbiAgICAgIHVzZXI6IGZha2VVc2VyXG4gICAgfVxuXG4gICAgY29uc3QgY3R4ID0geyByZXF1ZXN0LCByZXNwb25zZSwgYXV0aCB9IGFzIHVua25vd24gYXMgSHR0cENvbnRleHRDb250cmFjdFxuXG4gICAgYXdhaXQgY29udHJvbGxlci5oYW5kbGUoY3R4KVxuXG4gICAgYXNzZXJ0LmlzVHJ1ZShyZXNwb25zZS5zdGF0dXMuY2FsbGVkV2l0aCg1MDApKVxuICAgIGFzc2VydC5pc1RydWUocmVzcG9uc2Uuc2VuZC5jYWxsZWRXaXRoKHtcbiAgICAgIHN0YXR1czogXCJFcnJvclwiLFxuICAgICAgbWVzc2FnZTogXCJFcnJvciBPY2N1cmVkIEZldGNoaW5nIE9yZ2FuaXNhdGlvblwiLFxuICAgICAgc3RhdHVzQ29kZTogNTAwXG4gICAgfSkpXG4gIH0pXG59KVxuIl19